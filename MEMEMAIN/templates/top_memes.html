<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –º–µ–º—ã VK –ø–∞–±–ª–∏–∫–æ–≤ - MemeInsight</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header class="header">
        <div class="project-name">MemeInsight</div>
        <nav class="navigation">
            <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="/top-memes" class="active">–¢–æ–ø –º–µ–º–æ–≤</a>
            <a href="/filter-memes">–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è</a>
        </nav>
    </header>

    <main class="main-content" style="padding-top: 80px; padding-left: 20px; padding-right: 20px;">
        <h1 style="margin-bottom: 30px; text-align: center;">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –º–µ–º—ã VK</h1>

        <div class="trending-section">
            <h2>–¢—Ä–µ–Ω–¥–æ–≤—ã–µ –º–µ–º—ã VK –ø–∞–±–ª–∏–∫–æ–≤</h2>
            <div class="meme-grid">
                {% for meme in trending_memes %}
                <div class="meme-card">
                    <img src="{{ meme.image_url }}" alt="{{ meme.title }}" class="meme-image" onerror="this.src='https://via.placeholder.com/300x200?text=–ú–µ–º'">
                    <div class="meme-info">
                        <div class="meme-title">{{ meme.title or '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è' }}</div>
                        <div class="meme-stats">
                            <span>‚ù§Ô∏è {{ meme.likes }}</span>
                            <span>üëÅÔ∏è {{ meme.views }}</span>
                            <span>üí¨ {{ meme.comments }}</span>
                            <span>üîÑ {{ meme.shares }}</span>
                        </div>
                        <div class="meme-date">üìÖ {{ meme.post_date_formatted }}</div>
                        <div class="meme-source">üì± {{ meme.source_platform or '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' }}</div>
                        <div class="meme-tags">
                            {% for tag in meme.tags %}
                            <a href="/filter-memes?tag={{ tag }}" class="tag">{{ tag }}</a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="popular-tags-section" style="margin-top: 40px;">
            <h2>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ–≥–∏</h2>
            <div class="tags-container" style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 20px;">
                {% for tag in popular_tags %}
                <a href="/filter-memes?tag={{ tag.tag }}" class="tag" style="font-size: {{ 0.8 + (tag.count / 30) }}rem; padding: 8px 12px; background-color: #6200ee; color: white; border-radius: 20px; text-decoration: none;">
                    {{ tag.tag }} ({{ tag.count }})
                </a>
                {% endfor %}
            </div>
        </div>

        <div class="top-memes-section" style="margin-top: 40px;">
            <h2>–õ—É—á—à–∏–µ –º–µ–º—ã –ø–æ —á–∏—Å–ª—É –ª–∞–π–∫–æ–≤</h2>
            <div class="meme-grid">
                {% for meme in top_memes %}
                <div class="meme-card">
                    <img src="{{ meme.image_url }}" alt="{{ meme.title }}" class="meme-image" onerror="this.src='https://via.placeholder.com/300x200?text=–ú–µ–º'">
                    <div class="meme-info">
                        <div class="meme-title">{{ meme.title or '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è' }}</div>
                        <div class="meme-stats">
                            <span>‚ù§Ô∏è {{ meme.likes }}</span>
                            <span>üëÅÔ∏è {{ meme.views }}</span>
                            <span>üí¨ {{ meme.comments }}</span>
                            <span>üîÑ {{ meme.shares }}</span>
                        </div>
                        <div class="meme-date">üìÖ {{ meme.post_date_formatted }}</div>
                        <div class="meme-source">üì± {{ meme.source_platform or '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' }}</div>
                        <div class="meme-tags">
                            {% for tag in meme.tags %}
                            <a href="/filter-memes?tag={{ tag }}" class="tag">{{ tag }}</a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </main>

    <footer style="background-color: #f0f0f0; padding: 20px; text-align: center; margin-top: 40px;">
        <p>¬© 2025 MemeInsight. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </footer>

    <script>
        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.meme-card').forEach(card => {
                observer.observe(card);
                card.classList.add('fade-in-element');
            });
        });
    </script>

    <style>
        .fade-in-element {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s, transform 0.5s;
        }

        .fade-in {
            opacity: 1;
            transform: translateY(0);
        }

        .navigation {
            display: flex;
            gap: 20px;
        }

        .navigation a {
            color: white;
            text-decoration: none;
            padding: 5px 10px;
        }

        .navigation a.active {
            font-weight: bold;
            border-bottom: 2px solid white;
        }

        .meme-card {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .meme-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .meme-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .meme-info {
            padding: 15px;
        }

        .meme-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #333;
        }

        .meme-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 8px;
        }

        .meme-date, .meme-source {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 8px;
        }

        .meme-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 10px;
        }

        .tag {
            background-color: #f0f0f0;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            color: #333;
            text-decoration: none;
            transition: background-color 0.2s;
        }

        .tag:hover {
            background-color: #e0e0e0;
        }
    </style>
</body>
</html>